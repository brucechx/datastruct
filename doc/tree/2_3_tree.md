# 2-3 树
## 特性
1. 任一节点只能是 2 度节点或 3 度节点，不存在元素数为 0 的节点。
    * 2度节点：包含 1 个元素的节点将只能有 2 个子节点；
    * 3度节点：包含 2 个元素的节点将只能有 3 个子节点；
2. 所有叶子节点都拥有相同的深度（depth）。
3. 元素始终保持排序顺序。

## 2-3 树插入
在树的插入之前需要对带插入的节点进行一次查找操作，若树中已经有此节点则不予插入，若没有查找到此节点则记录未命中查找结束时访问的最后一个节点。
空树的插入最简单，创建一个节点即可，这里不予赘述。
对于非空树插入主要分为 4 种情况：
+   向 2- 节点中插入新节点
    - 操作步骤：如果未命中查找结束于一个 2-节点，直接将 2- 节点替换为一个 3- 节点，并将要插入的键保存在其中。
+   向一棵只含 3- 节点的树中插入新节点
    - 操作步骤：操作步骤：先临时将新键存入唯一的 3- 节点中，使其成为一个 4- 节点，再将它转化为一颗由 3 个 2- 节点组成的 2-3 树，分解后树高会增加 1。
+   向一个父节点为 2- 节点的 3- 节点中插入新节点
    - 操作步骤：先构造一个临时的 4- 节点并将其分解，分解时将中键移动到父节点中(中键移动后，其父节点中的位置由键的大小确定)
+   向一个父节点为 3- 节点的 3- 节点中插入新节点
    - 操作步骤：插入节点后一直向上分解构造的临时4-节点并将中键移动到更高层双亲节点，直到遇到一个-2节点并将其替换为一个不需要继续分解的3-节点，或是到达树根(3-节点)。
    - 分解根结点： 如果从插入节点到根节点的路径上全是3-节点（包含根节点在内），根节点将最终被替换为一个临时的4-节点，将临时的4-节点分解为3个2-节点，分解后树高会增加1。
 
## 2-3 树删除
删除之前，先要对2-3树进行一次命中的查找，查找成功才可以进行删除操作。
删除节点大概分为3种情形
+ 删除非叶子节点。
    - 操作步骤：使用中序遍历下的直接后继节点key来覆盖当前待删除节点key，再删除用来覆盖的后继节点key。
+ 删除不为2-节点的叶子节点。
    - 操作步骤：删除不为2-节点的叶子节点，直接删除节点即可。
+ 删除为2-节点的叶子节点。    
    - 删除节点为2-节点，父节点为2-节点，兄弟节点为3-节点
        * 操作步骤：当前待删除节点的父节点是2-节点、兄弟节点是3-节点，将父节点移动到当前待删除节点位置，再将兄弟节点中最接近当前位置的key移动到父节点中。
    - 删除节点为2-节点，父节点为2-节点，兄弟节点为2-节点
        * 操作步骤：当前待删除节点的父节点是2-节点、兄弟节点也是2-节点，先通过移动兄弟节点的中序遍历直接后驱到兄弟节点，以使兄弟节点变为3-节点；再进行6.3.1的操作
    - 删除节点为2-节点，父节点为3-节点
        * 操作步骤：当前待删除节点的父节点是3-节点，拆分父节点使其成为2-节点，再将再将父节点中最接近的一个拆分key与中孩子合并，将合并后的节点作为当前节点。
    - 2-3树为满二叉树，删除叶子节点
        * 操作步骤：若2-3树是一颗满二叉树，将2-3树层树减少，并将当前删除节点的兄弟节点合并到父节点中，同时将父节点的所有兄弟节点合并到父节点的父节点中，如果生成了4-节点，再分解4-节点。

## 结论
2-3 树作为一种平衡查找树，查询效率比普通的二叉排序树要稳定许多。但是2-3树需要维护两种不同类型的结点，查找和插入操作的实现需要大量的代码，而且它们所产生的额外开销可能会使算法比标准的二叉查找树更慢。

## 相比二叉查找树，2-3 树的优势
1. 2-3 树可以获得更好的渐进查找时间 O(log2 n)。
2. 2-3 树更容易保持树的平衡。

## 不同的平衡查找树的高度（height）
* AVL 树：高度 ≤ (1.44042..)log2 n
* 红黑树：高度 ≤ 2*log2 (n+1)
* 2-3 树：高度 ≤ log2 n
* 2-3-4 树：高度 ≤ log2 n

## 参考
- [2-3-4树分析及源码实现](https://blog.csdn.net/qq_26323323/article/details/79615140)
- [数据结构与算法——2-3树](https://mp.weixin.qq.com/s/qqugzuLxJ8ja7oyMgn7bEQ)
- [数据结构与算法——2-3-4树](https://mp.weixin.qq.com/s/ZItUJ0UNfEJir6-z7i_r-g)
- [平衡查找树（2-3-4 树）](http://www.cnblogs.com/gaochundong/p/balanced_search_tree.html)